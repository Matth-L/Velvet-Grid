https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/monitoring_and_managing_system_status_and_performance/setting-up-pcp_monitoring-and-managing-system-status-and-performance

https://www.ibm.com/docs/en/solution-assurance?topic=systems-performance-co-pilot-setup


# Launch
Launching pcp :
```sh
/usr/libexec/pcp/bin/pmcd
pcp # it works ! 
```

List metrics :
```
pminfo 
```

Launch proxy :
```sh
/usr/libexec/pcp/bin/pmproxy -p 44322 
```


Both the pmcd and pmproxy daemons are capable of simultaneous TLS and non-TLS communications on a single port (by default, port 44321 for pmcd and 44322 for pmproxy). This means that you do not have to choose between TLS or non-TLS communications for your PCP Collector systems; both can be used at the same time.

# pmlogger : 
https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/monitoring_and_managing_system_status_and_performance/logging-performance-data-with-pmlogger_monitoring-and-managing-system-status-and-performance


The remote archive form specifies the location of the pmproxy(1)
server to which components of the archive are sent as they are
being generated by pmlogger.  The value provided must contain
protocol, hostname and optional port, e.g.
http://example.com:44322 .  This pmproxy server will select an
archive name based on the start time, in a similar fashion to the
model used by default in pmlogger_check(1).

pmlogger doit être envoyé depuis c2 vers le pmproxy de c1

# Test 

```sh
srun --partition=compute --mpi=pmi2 -N 1 --nodelist=c1  sleep 100000 &
```

## Test on node

Sur c2 :
```sh
docker exec -it c2 bash 
/usr/libexec/pcp/bin/pmcd
```

Sur c1:
```sh
docker exec -it c1 bash 
pminfo -h c2
/usr/libexec/pcp/bin/pmproxy -A -p 44322 
```
